"use strict";(()=>{var e={};e.id=350,e.ids=[350],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78867:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>F,patchFetch:()=>B,requestAsyncStorage:()=>j,routeModule:()=>L,serverHooks:()=>U,staticGenerationAsyncStorage:()=>C});var i={};r.r(i),r.d(i,{GET:()=>O,POST:()=>D});var n=r(49303),s=r(88716),a=r(60670),o=r(87070),l=r(13114),d=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))m.call(t,r)&&f(e,r,t[r]);return e},y=(e,t)=>c(e,u(t)),b=(e,t,r)=>new Promise((i,n)=>{var s=e=>{try{o(r.next(e))}catch(e){n(e)}},a=e=>{try{o(r.throw(e))}catch(e){n(e)}},o=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,a);o((r=r.apply(e,t)).next())}),A=class{constructor(e){this.resend=e}create(e){return b(this,arguments,function*(e,t={}){return yield this.resend.post("/api-keys",e,t)})}list(){return b(this,null,function*(){return yield this.resend.get("/api-keys")})}remove(e){return b(this,null,function*(){return yield this.resend.delete(`/api-keys/${e}`)})}},$=class{constructor(e){this.resend=e}create(e){return b(this,arguments,function*(e,t={}){return yield this.resend.post("/audiences",e,t)})}list(){return b(this,null,function*(){return yield this.resend.get("/audiences")})}get(e){return b(this,null,function*(){return yield this.resend.get(`/audiences/${e}`)})}remove(e){return b(this,null,function*(){return yield this.resend.delete(`/audiences/${e}`)})}};function w(e){var t;return{attachments:null==(t=e.attachments)?void 0:t.map(e=>({content:e.content,filename:e.filename,path:e.path,content_type:e.contentType,content_id:e.contentId})),bcc:e.bcc,cc:e.cc,from:e.from,headers:e.headers,html:e.html,reply_to:e.replyTo,scheduled_at:e.scheduledAt,subject:e.subject,tags:e.tags,text:e.text,to:e.to}}var v=class{constructor(e){this.resend=e}send(e){return b(this,arguments,function*(e,t={}){return this.create(e,t)})}create(e){return b(this,arguments,function*(e,t={}){let i=[];for(let t of e){if(t.react){if(!this.renderAsync)try{let{renderAsync:e}=yield r.e(486).then(r.t.bind(r,75486,19));this.renderAsync=e}catch(e){throw Error("Failed to render React component. Make sure to install `@react-email/render`")}t.html=yield this.renderAsync(t.react),t.react=void 0}i.push(w(t))}return yield this.resend.post("/emails/batch",i,t)})}},N=class{constructor(e){this.resend=e}create(e){return b(this,arguments,function*(e,t={}){if(e.react){if(!this.renderAsync)try{let{renderAsync:e}=yield r.e(486).then(r.t.bind(r,75486,19));this.renderAsync=e}catch(e){throw Error("Failed to render React component. Make sure to install `@react-email/render`")}e.html=yield this.renderAsync(e.react)}return yield this.resend.post("/broadcasts",{name:e.name,audience_id:e.audienceId,preview_text:e.previewText,from:e.from,html:e.html,reply_to:e.replyTo,subject:e.subject,text:e.text},t)})}send(e,t){return b(this,null,function*(){return yield this.resend.post(`/broadcasts/${e}/send`,{scheduled_at:null==t?void 0:t.scheduledAt})})}list(){return b(this,null,function*(){return yield this.resend.get("/broadcasts")})}get(e){return b(this,null,function*(){return yield this.resend.get(`/broadcasts/${e}`)})}remove(e){return b(this,null,function*(){return yield this.resend.delete(`/broadcasts/${e}`)})}update(e,t){return b(this,null,function*(){return yield this.resend.patch(`/broadcasts/${e}`,{name:t.name,audience_id:t.audienceId,from:t.from,html:t.html,text:t.text,subject:t.subject,reply_to:t.replyTo,preview_text:t.previewText})})}},T=class{constructor(e){this.resend=e}create(e){return b(this,arguments,function*(e,t={}){return yield this.resend.post(`/audiences/${e.audienceId}/contacts`,{unsubscribed:e.unsubscribed,email:e.email,first_name:e.firstName,last_name:e.lastName},t)})}list(e){return b(this,null,function*(){return yield this.resend.get(`/audiences/${e.audienceId}/contacts`)})}get(e){return b(this,null,function*(){return e.id||e.email?yield this.resend.get(`/audiences/${e.audienceId}/contacts/${(null==e?void 0:e.email)?null==e?void 0:e.email:null==e?void 0:e.id}`):{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}})}update(e){return b(this,null,function*(){return e.id||e.email?yield this.resend.patch(`/audiences/${e.audienceId}/contacts/${(null==e?void 0:e.email)?null==e?void 0:e.email:null==e?void 0:e.id}`,{unsubscribed:e.unsubscribed,first_name:e.firstName,last_name:e.lastName}):{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}})}remove(e){return b(this,null,function*(){return e.id||e.email?yield this.resend.delete(`/audiences/${e.audienceId}/contacts/${(null==e?void 0:e.email)?null==e?void 0:e.email:null==e?void 0:e.id}`):{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}})}},S=class{constructor(e){this.resend=e}create(e){return b(this,arguments,function*(e,t={}){return yield this.resend.post("/domains",{name:e.name,region:e.region,custom_return_path:e.customReturnPath},t)})}list(){return b(this,null,function*(){return yield this.resend.get("/domains")})}get(e){return b(this,null,function*(){return yield this.resend.get(`/domains/${e}`)})}update(e){return b(this,null,function*(){return yield this.resend.patch(`/domains/${e.id}`,{click_tracking:e.clickTracking,open_tracking:e.openTracking,tls:e.tls})})}remove(e){return b(this,null,function*(){return yield this.resend.delete(`/domains/${e}`)})}verify(e){return b(this,null,function*(){return yield this.resend.post(`/domains/${e}/verify`)})}},E=class{constructor(e){this.resend=e}send(e){return b(this,arguments,function*(e,t={}){return this.create(e,t)})}create(e){return b(this,arguments,function*(e,t={}){if(e.react){if(!this.renderAsync)try{let{renderAsync:e}=yield r.e(486).then(r.t.bind(r,75486,19));this.renderAsync=e}catch(e){throw Error("Failed to render React component. Make sure to install `@react-email/render`")}e.html=yield this.renderAsync(e.react)}return yield this.resend.post("/emails",w(e),t)})}get(e){return b(this,null,function*(){return yield this.resend.get(`/emails/${e}`)})}update(e){return b(this,null,function*(){return yield this.resend.patch(`/emails/${e.id}`,{scheduled_at:e.scheduledAt})})}cancel(e){return b(this,null,function*(){return yield this.resend.post(`/emails/${e}/cancel`)})}},k="undefined"!=typeof process&&process.env&&process.env.RESEND_BASE_URL||"https://api.resend.com",I="undefined"!=typeof process&&process.env&&process.env.RESEND_USER_AGENT||"resend-node:6.0.1";let P=new class{constructor(e){if(this.key=e,this.apiKeys=new A(this),this.audiences=new $(this),this.batch=new v(this),this.broadcasts=new N(this),this.contacts=new T(this),this.domains=new S(this),this.emails=new E(this),!e&&("undefined"!=typeof process&&process.env&&(this.key=process.env.RESEND_API_KEY),!this.key))throw Error('Missing API key. Pass it to the constructor `new Resend("re_123")`');this.headers=new Headers({Authorization:`Bearer ${this.key}`,"User-Agent":I,"Content-Type":"application/json"})}fetchRequest(e){return b(this,arguments,function*(e,t={}){try{let r=yield fetch(`${k}${e}`,t);if(!r.ok)try{let e=yield r.text();return{data:null,error:JSON.parse(e)}}catch(t){if(t instanceof SyntaxError)return{data:null,error:{name:"application_error",message:"Internal server error. We are unable to process your request right now, please try again later."}};let e={message:r.statusText,name:"application_error"};if(t instanceof Error)return{data:null,error:y(g({},e),{message:t.message})};return{data:null,error:e}}return{data:yield r.json(),error:null}}catch(e){return{data:null,error:{name:"application_error",message:"Unable to fetch data. The request could not be resolved."}}}})}post(e,t){return b(this,arguments,function*(e,t,r={}){let i=new Headers(this.headers);r.idempotencyKey&&i.set("Idempotency-Key",r.idempotencyKey);let n=g({method:"POST",headers:i,body:JSON.stringify(t)},r);return this.fetchRequest(e,n)})}get(e){return b(this,arguments,function*(e,t={}){let r=g({method:"GET",headers:this.headers},t);return this.fetchRequest(e,r)})}put(e,t){return b(this,arguments,function*(e,t,r={}){let i=g({method:"PUT",headers:this.headers,body:JSON.stringify(t)},r);return this.fetchRequest(e,i)})}patch(e,t){return b(this,arguments,function*(e,t,r={}){let i=g({method:"PATCH",headers:this.headers,body:JSON.stringify(t)},r);return this.fetchRequest(e,i)})}delete(e,t){return b(this,null,function*(){let r={method:"DELETE",headers:this.headers,body:JSON.stringify(t)};return this.fetchRequest(e,r)})}}(process.env.RESEND_API_KEY);class _{constructor(){this.adminEmail=process.env.ADMIN_EMAIL||"your-email@example.com"}async notifyAdminOfNewLead(e){let{leadType:t,leadData:r,userEmail:i}=e,n="",s="";switch(t){case"air-washer-gift":n=`üéÅ New Free Air Washer Gift Claim - ${r.firstName} ${r.lastName}`,s=`
          <h2>New Free Air Washer Gift Claim</h2>
          <p><strong>Name:</strong> ${r.firstName} ${r.lastName}</p>
          <p><strong>Email:</strong> ${r.email}</p>
          <p><strong>Phone:</strong> ${r.phone}</p>
          <p><strong>Address:</strong> ${r.address}</p>
          <p><strong>Time:</strong> ${new Date().toLocaleString()}</p>
          
          <h3>Next Steps:</h3>
          <ul>
            <li>Contact within 24 hours</li>
            <li>Schedule home demonstration appointment</li>
            <li>Prepare Air Washer demonstration materials</li>
            <li>Bring gift Air Washer for customer</li>
          </ul>
        `;break;case"booking":n=`üìÖ New Consultation Booking - ${r.firstName} ${r.lastName}`,s=`
          <h2>New Consultation Booking</h2>
          <p><strong>Name:</strong> ${r.firstName} ${r.lastName}</p>
          <p><strong>Email:</strong> ${r.email}</p>
          <p><strong>Phone:</strong> ${r.phone}</p>
          <p><strong>Type:</strong> ${r.consultationType}</p>
          <p><strong>Preferred Date:</strong> ${r.preferredDate}</p>
          <p><strong>Time Slot:</strong> ${r.timeSlot}</p>
          <p><strong>Message:</strong> ${r.message||"None"}</p>
          <p><strong>Submitted:</strong> ${new Date().toLocaleString()}</p>
        `;break;case"affiliate":n=`ü§ù New Affiliate Application - ${r.firstName} ${r.lastName}`,s=`
          <h2>New Affiliate Partner Application</h2>
          <p><strong>Name:</strong> ${r.firstName} ${r.lastName}</p>
          <p><strong>Email:</strong> ${r.email}</p>
          <p><strong>Phone:</strong> ${r.phone}</p>
          <p><strong>Platform:</strong> ${r.platform}</p>
          <p><strong>Followers:</strong> ${r.followers}</p>
          <p><strong>Experience:</strong> ${r.experience}</p>
          <p><strong>Motivation:</strong> ${r.motivation}</p>
          <p><strong>Submitted:</strong> ${new Date().toLocaleString()}</p>
          
          <h3>Next Steps:</h3>
          <ul>
            <li>Review application within 2-3 days</li>
            <li>Schedule partner onboarding call</li>
            <li>Prepare marketing materials</li>
          </ul>
        `;break;case"job-application":n=`üíº New Sales Job Application - ${r.firstName} ${r.lastName}`,s=`
          <h2>New Door-to-Door Sales Application</h2>
          <p><strong>Name:</strong> ${r.firstName} ${r.lastName}</p>
          <p><strong>Email:</strong> ${r.email}</p>
          <p><strong>Phone:</strong> ${r.phone}</p>
          <p><strong>Location:</strong> ${r.location}</p>
          <p><strong>Sales Experience:</strong> ${r.experience}</p>
          <p><strong>Availability:</strong> ${r.availability}</p>
          <p><strong>Has Transportation:</strong> ${r.hasTransportation?"Yes":"No"}</p>
          <p><strong>Resume:</strong> ${r.resumeFileName||"Not provided"}</p>
          <p><strong>Submitted:</strong> ${new Date().toLocaleString()}</p>
          
          <h3>Motivation:</h3>
          <p style="background: #f3f4f6; padding: 12px; border-radius: 6px;">${r.motivation}</p>
          
          <h3>Next Steps:</h3>
          <ul>
            <li>Review application within 24-48 hours</li>
            <li>Schedule phone interview if qualified</li>
            <li>Conduct background check if needed</li>
            <li>Schedule in-person training session</li>
          </ul>
          
          <p><strong>Position Details:</strong> Part-time door-to-door sales, up to $1,500 weekly commission, flexible schedule, full training provided.</p>
        `}try{await P.emails.send({from:"Delphin Website <onboarding@resend.dev>",to:[this.adminEmail],subject:n,html:s,replyTo:i})}catch(e){console.error("Failed to send admin notification:",e)}}async sendUserConfirmation(e,t){let r="",i="";switch(e){case"air-washer-gift":r="Your Free Air Washer Gift is Confirmed!",i=`
          <h2>Thank you for claiming your free Air Washer gift!</h2>
          <p>Hi ${t.firstName},</p>
          <p>We've received your request for a free Air Washer gift. Our expert will contact you within 24 hours to schedule your home demonstration appointment.</p>
          
          <h3>What to expect:</h3>
          <ul>
            <li>Free Air Washer demonstration at your home</li>
            <li>Air quality testing and assessment</li>
            <li>Your complimentary Air Washer gift</li>
            <li>Personalized clean air recommendations</li>
          </ul>
          
          <p>Questions? Reply to this email or call us directly.</p>
          <p>Best regards,<br>The Delphin Clean Air Team</p>
        `;break;case"booking":r="Consultation Booking Confirmed!",i=`
          <h2>Your consultation is confirmed!</h2>
          <p>Hi ${t.firstName},</p>
          <p>Thank you for booking a consultation with our clean air experts.</p>
          
          <h3>Booking Details:</h3>
          <ul>
            <li><strong>Type:</strong> ${t.consultationType}</li>
            <li><strong>Preferred Date:</strong> ${t.preferredDate}</li>
            <li><strong>Time:</strong> ${t.timeSlot}</li>
          </ul>
          
          <p>We'll contact you soon to confirm the exact time and provide any additional details.</p>
          <p>Best regards,<br>The Delphin Clean Air Team</p>
        `}try{await P.emails.send({from:"Delphin Clean Air <onboarding@resend.dev>",to:[t.email],subject:r,html:i})}catch(e){console.error("Failed to send user confirmation:",e)}}}let x=new l.hV,R=new _;async function D(e){try{let{type:t,data:r}=await e.json(),i={firstName:r.firstName,lastName:r.lastName||"",email:r.email,phone:r.phone||"",source:t,details:r,createdAt:new Date().toISOString()};console.log(`üéØ NEW LEAD - ${t.toUpperCase()}:`,{name:`${r.firstName} ${r.lastName||""}`.trim(),email:r.email,phone:r.phone||"Not provided",timestamp:new Date().toLocaleString(),details:r});try{await x.createLead(i),console.log("‚úÖ Lead saved to Airtable")}catch(e){console.log("‚ö†Ô∏è Airtable save failed (but continuing):",e)}try{await R.notifyAdminOfNewLead({leadType:t,leadData:r,userEmail:r.email}),console.log("‚úÖ Admin email sent")}catch(e){console.log("‚ö†Ô∏è Admin email failed (but continuing):",e)}try{await R.sendUserConfirmation(t,r),console.log("‚úÖ User confirmation email sent")}catch(e){console.log("‚ö†Ô∏è User email failed (but continuing):",e)}return o.NextResponse.json({success:!0,message:"Lead captured successfully",leadId:Date.now()})}catch(e){return console.error("‚ùå Lead capture error:",e),o.NextResponse.json({success:!1,message:"Failed to capture lead"},{status:500})}}async function O(){try{let e=await x.getLeads();return o.NextResponse.json(e)}catch(e){return console.error("Failed to fetch leads:",e),o.NextResponse.json({error:"Failed to fetch leads"},{status:500})}}let L=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/leads/route",pathname:"/api/leads",filename:"route",bundlePath:"app/api/leads/route"},resolvedPagePath:"/Users/erosnolasco-mendoza/Documents(non-iCloud)/VSCode/delphincleanair/app/api/leads/route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:j,staticGenerationAsyncStorage:C,serverHooks:U}=L,F="/api/leads/route";function B(){return(0,a.patchFetch)({serverHooks:U,staticGenerationAsyncStorage:C})}},13114:(e,t,r)=>{r.d(t,{hV:()=>i,o:()=>s});class i{constructor(){this.baseId=process.env.AIRTABLE_BASE_ID||"",this.apiKey=process.env.AIRTABLE_API_KEY||"",this.tableName="Leads"}async createLead(e){let t=`https://api.airtable.com/v0/${this.baseId}/${this.tableName}`;try{let r=await fetch(t,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({fields:{"First Name":e.firstName,"Last Name":e.lastName,Email:e.email,Phone:e.phone,Address:e.details?.address||"",Source:"air-washer-gift"===e.source?"air-washer-gift":e.source,Details:JSON.stringify(e.details),"Created At":new Date().toISOString().split("T")[0],Status:"New"}})}),i=await r.json();if(!r.ok)throw console.error("‚ùå Airtable API error details:",i),Error(`Airtable API error: ${r.status} - ${JSON.stringify(i)}`);return i}catch(e){throw console.error("‚ùå Failed to create lead in Airtable:",e),e}}async getLeads(){let e=`https://api.airtable.com/v0/${this.baseId}/${this.tableName}`;try{let t=await fetch(e,{headers:{Authorization:`Bearer ${this.apiKey}`}});if(!t.ok)throw Error(`Airtable API error: ${t.status}`);return await t.json()}catch(e){throw console.error("Failed to fetch leads from Airtable:",e),e}}}class n{constructor(){this.baseId=process.env.AIRTABLE_BASE_ID||"",this.apiKey=process.env.AIRTABLE_API_KEY||"",this.tableName="Testimonials"}async createTestimonial(e){let t=`https://api.airtable.com/v0/${this.baseId}/${this.tableName}`;try{let r=await fetch(t,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({fields:{Type:e.type,Content:e.content,Author:e.author,Location:e.location||"",Rating:e.rating||0,"Video URL":e.videoUrl||"","Image URL":e.imageUrl||"","TikTok URL":e.tiktokUrl||"",Date:e.date||new Date().toISOString().split("T")[0],"Is Approved":e.isApproved||!1,"Created At":new Date().toISOString().split("T")[0]}})}),i=await r.json();if(!r.ok)throw console.error("‚ùå Airtable API error details:",i),Error(`Airtable API error: ${r.status} - ${JSON.stringify(i)}`);return i}catch(e){throw console.error("‚ùå Failed to create testimonial in Airtable:",e),e}}async getTestimonials(){let e=`https://api.airtable.com/v0/${this.baseId}/${this.tableName}?filterByFormula=AND({Is Approved}=TRUE())&sort[0][field]=Created At&sort[0][direction]=desc`;try{let t=await fetch(e,{headers:{Authorization:`Bearer ${this.apiKey}`}}),r=await t.json();if(!t.ok)throw console.error("‚ùå Airtable API error details:",r),Error(`Airtable API error: ${t.status} - ${JSON.stringify(r)}`);return r}catch(e){throw console.error("‚ùå Failed to get testimonials from Airtable:",e),e}}async getAllTestimonials(){let e=`https://api.airtable.com/v0/${this.baseId}/${this.tableName}?sort[0][field]=Created At&sort[0][direction]=desc`;try{let t=await fetch(e,{headers:{Authorization:`Bearer ${this.apiKey}`}}),r=await t.json();if(!t.ok)throw console.error("‚ùå Airtable API error details:",r),Error(`Airtable API error: ${t.status} - ${JSON.stringify(r)}`);return r}catch(e){throw console.error("‚ùå Failed to get all testimonials from Airtable:",e),e}}async updateTestimonial(e,t){let r=`https://api.airtable.com/v0/${this.baseId}/${this.tableName}/${e}`;try{let e={};t.type&&(e.Type=t.type),t.content&&(e.Content=t.content),t.author&&(e.Author=t.author),void 0!==t.location&&(e.Location=t.location),void 0!==t.rating&&(e.Rating=t.rating),void 0!==t.videoUrl&&(e["Video URL"]=t.videoUrl),void 0!==t.imageUrl&&(e["Image URL"]=t.imageUrl),void 0!==t.tiktokUrl&&(e["TikTok URL"]=t.tiktokUrl),t.date&&(e.Date=t.date),void 0!==t.isApproved&&(e["Is Approved"]=t.isApproved);let i=await fetch(r,{method:"PATCH",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({fields:e})}),n=await i.json();if(!i.ok)throw console.error("‚ùå Airtable API error details:",n),Error(`Airtable API error: ${i.status} - ${JSON.stringify(n)}`);return n}catch(e){throw console.error("‚ùå Failed to update testimonial in Airtable:",e),e}}async deleteTestimonial(e){let t=`https://api.airtable.com/v0/${this.baseId}/${this.tableName}/${e}`;try{let e=await fetch(t,{method:"DELETE",headers:{Authorization:`Bearer ${this.apiKey}`}});if(!e.ok){let t=await e.json();throw console.error("‚ùå Airtable API error details:",t),Error(`Airtable API error: ${e.status} - ${JSON.stringify(t)}`)}return{deleted:!0}}catch(e){throw console.error("‚ùå Failed to delete testimonial from Airtable:",e),e}}}let s=new n}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,972],()=>r(78867));module.exports=i})();